<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/fragmentos :: head"></head>

<body>

	<div class="container">
		<div th:replace="fragments/fragmentos :: navbar"></div>
		<div class="row mt-4">
			<div class="col-12 col-md-4 mb-4">
				<h1>Mantenimiento de Productos</h1>
				<form action="/productos/grabar" method="post" th:object="${producto}">

					<div class="mb-3">
						<label for="inputCod">Código</label>
						<input type="text" th:field="*{id_prod}" class="form-control" id="inputCod"
							placeholder="Código">
					</div>
					<div class="mb-3">
						<label for="inputNom">Nombre</label>
						<input type="text" th:field="*{des_prod}" class="form-control" id="inputNom"
							placeholder="Nombre">
					</div>
					<div class="row">
						<div class="col-md-6 mb-3">
							<label for="inputStk">Stock</label>
							<input type="number" th:field="*{stk_prod}" class="form-control" id="inputStk"
								placeholder="0">
						</div>
						<div class="col-md-6 mb-3">
							<label for="inputPrec">Precio</label>
							<input type="number" step="0.01" th:field="*{pre_prod}" class="form-control" id="inputPrec"
								placeholder="0.00">
						</div>
					</div>
					<div class="row">
						<div class="col-md-4 mb-3">
							<label for="inputCat">Categoría</label>
							<select th:field="*{idcategoria}" id="inputCat" class="form-control">
								<option value="-1">Seleccione...</option>
								<option th:each="c : ${lstCategorias}" th:text="${c.descripcion}"
									th:value="${c.idcategoria}">Seleccione...</option>
							</select>

						</div>
						<div class="col-md-4 mb-3">
							<label for="inputEstado">Estado</label>
							<select th:field="*{est_prod}" id="inputEstado" class="form-control">
								<option value="-1">Seleccione...</option>
								<option value="1">Activo</option>
								<option value="0">Eliminado</option>
							</select>
						</div>
						<div class="col-md-4 mb-3">
							<label for="inputProv">Proveedor</label>
							<select th:field="*{idproveedor}" id="inputProv" class="form-control">
								<option value="-1">Seleccione...</option>
								<option value="1">Proveedor1...</option>
								<option value="2">Proveedor2...</option>
								<option value="3">Proveedor3...</option>
							</select>
						</div>
					</div>
					<div class="d-flex gap-2 mt-3">
						<button type="submit" class="btn btn-primary">Registrar</button>
						<a href="/productos/reportes" class="btn btn-primary">Reporte PDF</a>	
					</div>
					
				</form>
				<div th:text="${mensaje}"></div>
			</div>
			<div class="col-12 col-md-8">
				<h3></h3>
				<table class="table table-hover align-middle">
					<thead>
						<tr>
							<th>Id</th>
							<th>Nombre</th>
							<th>Stock</th>
							<th>Precio</th>
							<th>Categoria</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="p : ${lstProductos}">
							<!--th scope="row" th:text="${p.id_prod}">1</th-->
							<th scope="row">
								<img th:src="@{/img/productos/}+${p.id_prod}+@{.png}" 
									width="80px" height="80px" class="rounded"
									alt="imagen del producto" 
									onerror="src='/img/productos/no-imagen.png'">
							</th>
							<td th:text="${p.des_prod}">xx</td>
							<td th:text="${p.stk_prod}">xx</td>
							<td th:text="${'S/' + #numbers.formatDecimal(p.pre_prod,1,'COMMA',2,'POINT')}">0</td>
							<td th:text="${p.objCategoria.descripcion}">xx</td>
							<td>
								<a th:href="@{/productos/editar/}+${p.id_prod}" 
									target="_blank" class="btn btn-warning btn-sm">Editar</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div th:replace="fragments/fragmentos :: js"></div>
</body>


</html>