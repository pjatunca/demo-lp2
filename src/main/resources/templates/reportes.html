<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Getting Started: Serving Web Content</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
</head>

<body>

	<div class="container">
		<div class="row">
			<div class="col-6 col-sm-4">
				<h1>Reporte de Productos</h1>
				<form action="/productos/grabar" method="post" th:object="${producto}">
					<div class="form-row">
						<div class="form-group col-md-4">
							<label for="inputCat">Categoría</label>
							<select th:field="*{idcategoria}" id="inputCat" class="form-control">
								<option value="-1">Seleccione...</option>
								<option th:each="c : ${lstCategorias}" th:text="${c.descripcion}"
									th:value="${c.idcategoria}">Seleccione...</option>
							</select>
						</div>
					</div>
					<button type="submit" class="btn btn-primary">Filtrar</button>
					<a href="/productos/reportes" class="btn btn-primary">Reporte PDF</a>
					<a target="_blank" href="/productos/graficos" class="btn btn-primary">Gráfico PDF</a>
				</form>
				<div th:text="${mensaje}"></div>
			</div>
			<div class="col-6 col-sm-7">
				<h3></h3>
				<table class="table">
					<thead>
						<tr>
							<th>Id</th>
							<th>Nombre</th>
							<th>Stock</th>
							<th>Precio</th>
							<th>Categoria</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="p : ${lstProductos}">
							<!--th scope="row" th:text="${p.id_prod}">1</th-->
							<th scope="row">
								<img th:src="@{/img/productos/}+${p.id_prod}+@{.png}" width="80px" height="80px"
									alt="imagen del producto" onerror="src='/img/productos/no-imagen.png'">
							</th>
							<td th:text="${p.des_prod}">xx</td>
							<td th:text="${p.stk_prod}">xx</td>
							<td th:text="${'S/'}+
								${#numbers.formatDecimal(p.pre_prod,1,'COMMA',2,'POINT')}">xx</td>
							<td th:text="${p.objCategoria.descripcion}">xx</td>
							<td>
								<a th:href="@{/productos/editar/}+${p.id_prod}" class="btn btn-warning">Editar</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>

</html>